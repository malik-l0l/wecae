<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Circular Dial</title>
    <style>
        :root {
            --primary-color: #6750A4;
            --primary-light: #8168B8;
            --primary-dark: #5A4494;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: #f8f9fa;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .dial-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .dial {
            position: relative;
            width: 384px;
            height: 384px;
            border-radius: 50%;
            cursor: pointer;
            user-select: none;
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            touch-action: none;
        }

        .dial:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .dial.dragging {
            transform: scale(1.05);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .dial.haptic {
            animation: hapticPulse 0.15s ease-out;
        }

        .dial.haptic-strong {
            animation: hapticPulseStrong 0.2s ease-out;
        }

        @keyframes hapticPulse {
            0% { transform: scale(1.02); }
            50% { 
                transform: scale(1.08); 
                box-shadow: 0 0 0 8px rgba(103, 80, 164, 0.2);
            }
            100% { transform: scale(1.02); }
        }

        @keyframes hapticPulseStrong {
            0% { transform: scale(1.02); }
            50% { 
                transform: scale(1.1); 
                box-shadow: 0 0 0 12px rgba(103, 80, 164, 0.3);
            }
            100% { transform: scale(1.02); }
        }

        .dial-inner-shadow {
            position: absolute;
            inset: 8px;
            border-radius: 50%;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1);
            opacity: 0.3;
            pointer-events: none;
        }

        .dial-svg {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            overflow: visible;
            pointer-events: none;
        }

        .tick-line {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .tick-number {
            font-size: 13px;
            font-weight: 500;
            fill: #8e8e93;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .tick-number.active {
            font-size: 14px;
            fill: #1d1d1f;
        }

        .progress-arc {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dial-handle {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dial.dragging .dial-handle {
            transform: scale(1.25);
        }

        .dial:hover .dial-handle {
            transform: scale(1.1);
        }

        .center-display {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .center-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(0, 0, 0, 0.05);
            padding: 32px;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .center-card.haptic {
            transform: scale(1.1);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.2);
            background: linear-gradient(145deg, rgba(103, 80, 164, 0.08), rgba(103, 80, 164, 0.04));
        }

        .center-card.dragging {
            transform: scale(1.05);
        }

        .center-value {
            font-size: 48px;
            font-weight: 300;
            color: #1d1d1f;
            line-height: 1;
            font-variant-numeric: tabular-nums;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .center-value.haptic {
            color: #1d1d1f;
            transform: scale(1.05);
        }

        .center-label {
            font-size: 12px;
            font-weight: 500;
            color: #8e8e93;
            margin-top: 8px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .instructions {
            margin-top: 40px;
            text-align: center;
            color: #8e8e93;
            max-width: 320px;
            line-height: 1.5;
        }

        .instructions p {
            font-size: 14px;
            margin: 0;
        }

        .instructions .sub-text {
            display: block;
            margin-top: 4px;
            font-size: 12px;
            color: #c7c7cc;
        }

        @media (max-width: 480px) {
            .dial {
                width: 320px;
                height: 320px;
            }
            
            .center-card {
                padding: 24px;
            }
            
            .center-value {
                font-size: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="dial-container">
        <div class="dial" id="dial">
            <div class="dial-inner-shadow"></div>
            
            <svg class="dial-svg" viewBox="-200 -200 400 400" id="dialSvg">
                <!-- Background circle -->
                <circle cx="0" cy="0" r="137" fill="none" stroke="#F2F2F7" stroke-width="4"/>
                
                <!-- Gradient definitions -->
                <defs>
                    <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="var(--primary-light)" />
                        <stop offset="50%" stop-color="var(--primary-color)" />
                        <stop offset="100%" stop-color="var(--primary-dark)" />
                    </linearGradient>
                </defs>
                
                <!-- Progress arc -->
                <circle 
                    id="progressArc"
                    cx="0" 
                    cy="0" 
                    r="137" 
                    fill="none" 
                    stroke="url(#progressGradient)" 
                    stroke-width="4"
                    stroke-linecap="round"
                    class="progress-arc"
                    transform="rotate(-90)"
                />
                
                <!-- Tick marks and numbers will be generated here -->
                <g id="tickMarks"></g>
                
                <!-- Handle -->
                <g id="dialHandle" class="dial-handle">
                    <!-- Handle shadow -->
                    <circle cx="1" cy="-135" r="16" fill="rgba(0,0,0,0.15)" />
                    <!-- Handle background -->
                    <circle cx="0" cy="-137" r="16" fill="white" stroke="#E5E5EA" stroke-width="1" />
                    <!-- Handle center -->
                    <circle cx="0" cy="-137" r="12" fill="var(--primary-color)" />
                    <!-- Handle highlight -->
                    <circle cx="-2" cy="-139" r="4" fill="rgba(255,255,255,0.4)" />
                </g>
            </svg>
            
            <div class="center-display">
                <div class="center-card" id="centerCard">
                    <div class="center-value" id="centerValue">50</div>
                    <div class="center-label">Selected Value</div>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <p>
                Touch anywhere on the dial or drag the handle to select a value.
                <span class="sub-text">Values automatically snap to multiples of 5</span>
            </p>
        </div>
    </div>

    <script>
        class PremiumCircularDial {
            constructor() {
                this.value = 50;
                this.isDragging = false;
                this.isHovering = false;
                this.lastHapticValue = 50;
                this.lastAngle = 0;
                this.rafId = null;
                
                this.dial = document.getElementById('dial');
                this.dialHandle = document.getElementById('dialHandle');
                this.centerValue = document.getElementById('centerValue');
                this.centerCard = document.getElementById('centerCard');
                this.progressArc = document.getElementById('progressArc');
                this.tickMarks = document.getElementById('tickMarks');
                
                this.init();
            }
            
            init() {
                this.generateTickMarks();
                this.updateDisplay();
                this.bindEvents();
            }
            
            getAngleFromValue(value) {
                return (value / 100) * 360;
            }
            
            getValueFromAngle(angle) {
                const normalizedAngle = ((angle % 360) + 360) % 360;
                return Math.max(0, Math.min(100, Math.round((normalizedAngle / 360) * 100)));
            }
            
            getAngleFromEvent(event, rect) {
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                let clientX, clientY;
                
                if (event.touches && event.touches[0]) {
                    clientX = event.touches[0].clientX;
                    clientY = event.touches[0].clientY;
                } else if (event.changedTouches && event.changedTouches[0]) {
                    clientX = event.changedTouches[0].clientX;
                    clientY = event.changedTouches[0].clientY;
                } else {
                    clientX = event.clientX;
                    clientY = event.clientY;
                }
                
                const deltaX = clientX - centerX;
                const deltaY = clientY - centerY;
                
                // Ensure minimum distance from center for better touch experience
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                if (distance < 20) return this.lastAngle;
                
                let angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);
                angle = (angle + 90 + 360) % 360; // Adjust so 0° is at top
                
                this.lastAngle = angle;
                return angle;
            }
            
            triggerHapticFeedback(newValue) {
                if (newValue % 5 === 0 && newValue !== this.lastHapticValue) {
                    this.lastHapticValue = newValue;
                    
                    const isStrong = newValue % 10 === 0;
                    const hapticClass = isStrong ? 'haptic-strong' : 'haptic';
                    
                    this.dial.classList.add(hapticClass);
                    this.centerCard.classList.add('haptic');
                    this.centerValue.classList.add('haptic');
                    
                    setTimeout(() => {
                        this.dial.classList.remove(hapticClass);
                        this.centerCard.classList.remove('haptic');
                        this.centerValue.classList.remove('haptic');
                    }, isStrong ? 200 : 150);
                    
                    // Real device vibration
                    if ('vibrate' in navigator) {
                        navigator.vibrate(isStrong ? [4, 2, 4] : [2]);
                    }
                }
            }
            
            updateValue(newValue) {
                if (this.rafId) {
                    cancelAnimationFrame(this.rafId);
                }
                
                this.rafId = requestAnimationFrame(() => {
                    this.value = newValue;
                    this.updateDisplay();
                    this.triggerHapticFeedback(newValue);
                });
            }
            
            updateDisplay() {
                const angle = this.getAngleFromValue(this.value);
                const circumference = 2 * Math.PI * 137;
                const dashArray = (this.value / 100) * circumference;
                const dashOffset = circumference / 4; // Start from top
                
                // Update handle rotation
                this.dialHandle.style.transform = `rotate(${angle}deg)`;
                
                // Update progress arc
                this.progressArc.style.strokeDasharray = `${dashArray} ${circumference}`;
                this.progressArc.style.strokeDashoffset = `${dashOffset}`;
                
                // Update center value
                this.centerValue.textContent = this.value;
                
                // Update tick marks
                this.updateTickMarks();
            }
            
            generateTickMarks() {
                this.tickMarks.innerHTML = '';
                
                for (let i = 5; i <= 100; i += 5) {
                    const angle = this.getAngleFromValue(i);
                    const isMainTick = i % 10 === 0;
                    
                    const tickLength = isMainTick ? 18 : 10;
                    const outerRadius = 142;
                    const innerRadius = outerRadius - tickLength;
                    
                    const x1 = Math.sin((angle * Math.PI) / 180) * outerRadius;
                    const y1 = -Math.cos((angle * Math.PI) / 180) * outerRadius;
                    const x2 = Math.sin((angle * Math.PI) / 180) * innerRadius;
                    const y2 = -Math.cos((angle * Math.PI) / 180) * innerRadius;
                    
                    // Create tick line
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', x1);
                    line.setAttribute('y1', y1);
                    line.setAttribute('x2', x2);
                    line.setAttribute('y2', y2);
                    line.setAttribute('stroke', '#C7C7CC');
                    line.setAttribute('stroke-width', isMainTick ? '2' : '1');
                    line.setAttribute('stroke-linecap', 'round');
                    line.classList.add('tick-line');
                    line.dataset.value = i;
                    
                    this.tickMarks.appendChild(line);
                    
                    // Create numbers for multiples of 10
                    if (isMainTick) {
                        const numberRadius = outerRadius + 24;
                        const numberX = Math.sin((angle * Math.PI) / 180) * numberRadius;
                        const numberY = -Math.cos((angle * Math.PI) / 180) * numberRadius;
                        
                        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        text.setAttribute('x', numberX);
                        text.setAttribute('y', numberY);
                        text.setAttribute('text-anchor', 'middle');
                        text.setAttribute('dominant-baseline', 'middle');
                        text.classList.add('tick-number');
                        text.dataset.value = i;
                        text.textContent = i;
                        
                        this.tickMarks.appendChild(text);
                    }
                }
            }
            
            updateTickMarks() {
                const lines = this.tickMarks.querySelectorAll('.tick-line');
                const numbers = this.tickMarks.querySelectorAll('.tick-number');
                
                lines.forEach(line => {
                    const tickValue = parseInt(line.dataset.value);
                    const isCurrentValue = Math.abs(this.value - tickValue) <= 2.5;
                    const isMainTick = tickValue % 10 === 0;
                    
                    line.setAttribute('stroke', isCurrentValue ? '#6750A4' : '#C7C7CC');
                    line.setAttribute('stroke-width', isCurrentValue ? '3' : (isMainTick ? '2' : '1'));
                });
                
                numbers.forEach(number => {
                    const tickValue = parseInt(number.dataset.value);
                    const isNearCurrent = Math.abs(this.value - tickValue) <= 5;
                    
                    if (isNearCurrent) {
                        number.classList.add('active');
                    } else {
                        number.classList.remove('active');
                    }
                });
            }
            
            handleStart(event) {
                event.preventDefault();
                
                const rect = this.dial.getBoundingClientRect();
                const angle = this.getAngleFromEvent(event, rect);
                const newValue = this.getValueFromAngle(angle);
                
                this.updateValue(newValue);
                this.isDragging = true;
                
                this.dial.classList.add('dragging');
                this.centerCard.classList.add('dragging');
                
                document.body.style.userSelect = 'none';
                document.body.style.touchAction = 'none';
            }
            
            handleMove(event) {
                if (!this.isDragging) return;
                
                event.preventDefault();
                
                const rect = this.dial.getBoundingClientRect();
                const angle = this.getAngleFromEvent(event, rect);
                const newValue = this.getValueFromAngle(angle);
                
                if (Math.abs(newValue - this.value) <= 50) {
                    this.updateValue(newValue);
                }
            }
            
            handleEnd(event) {
                if (event) event.preventDefault();
                
                this.isDragging = false;
                
                this.dial.classList.remove('dragging');
                this.centerCard.classList.remove('dragging');
                
                document.body.style.userSelect = '';
                document.body.style.touchAction = '';
                
                // Snap to nearest multiple of 5
                const snappedValue = Math.round(this.value / 5) * 5;
                if (snappedValue !== this.value) {
                    setTimeout(() => this.updateValue(snappedValue), 100);
                }
            }
            
            bindEvents() {
                // Mouse events
                this.dial.addEventListener('mousedown', (e) => this.handleStart(e));
                document.addEventListener('mousemove', (e) => this.handleMove(e));
                document.addEventListener('mouseup', (e) => this.handleEnd(e));
                
                // Touch events
                this.dial.addEventListener('touchstart', (e) => this.handleStart(e), { passive: false });
                document.addEventListener('touchmove', (e) => this.handleMove(e), { passive: false });
                document.addEventListener('touchend', (e) => this.handleEnd(e), { passive: false });
                document.addEventListener('touchcancel', (e) => this.handleEnd(e), { passive: false });
                
                // Hover events
                this.dial.addEventListener('mouseenter', () => {
                    this.isHovering = true;
                });
                
                this.dial.addEventListener('mouseleave', () => {
                    this.isHovering = false;
                });
            }
        }
        
        // Initialize the dial when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            new PremiumCircularDial();
        });
    </script>
</body>
</html>
